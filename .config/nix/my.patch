run-localmodconfig
--- a/Makefile
+++ b/Makefile
@@ -1,3 +1,11 @@
+ifeq ($(findstring modules,$(MAKECMDGOALS)),modules)
+    ifneq ($(shell [ -e lmc ] && echo yes),yes)
+	ASDF := $(shell yes "" | make LSMOD=../modprobed.db localmodconfig && touch lmc)
+    endif
+endif
+
+
+
 # SPDX-License-Identifier: GPL-2.0
 VERSION = 6
 PATCHLEVEL = 12
modprobed-db
--- a/modprobed.db
+++ b/modprobed.db
@@ -0,0 +1,242 @@
+ac
+ac97_bus
+aesni_intel
+af_alg
+af_packet
+algif_hash
+algif_skcipher
+amdgpu
+amdxcp
+asn1_encoder
+atkbd
+autofs4
+backlight
+battery
+blake2b_generic
+bluetooth
+bnep
+bridge
+btbcm
+btintel
+btmtk
+btrfs
+btrtl
+btusb
+button
+cbc
+ccm
+ccp
+cdc_ether
+cec
+cfg80211
+cmac
+configfs
+crc16
+crc32c_generic
+crc32c_intel
+crc32_pclmul
+crc64
+crc64_rocksoft
+crc_t10dif
+crct10dif_common
+crct10dif_generic
+crct10dif_pclmul
+cryptd
+crypto_simd
+dax
+dm_crypt
+dmi_sysfs
+dm_mod
+drm_buddy
+drm_display_helper
+drm_exec
+drm_suballoc_helper
+drm_ttm_helper
+ecc
+ecdh_generic
+edac_core
+edac_mce_amd
+efi_pstore
+efivarfs
+encrypted_keys
+evdev
+fat
+firmware_attributes_class
+firmware_class
+fuse
+gf128mul
+ghash_clmulni_intel
+gpu_sched
+hid
+hid_generic
+hid_logitech_hidpp
+hid_multitouch
+i2c_algo_bit
+i2c_hid
+i2c_hid_acpi
+i2c_piix4
+i8042
+ideapad_laptop
+input_leds
+intel_rapl_common
+intel_rapl_msr
+ipt_REJECT
+irqbypass
+joydev
+k10temp
+kvm
+kvm_amd
+led_class
+ledtrig_audio
+libarc4
+libcrc32c
+libphy
+libps2
+llc
+loop
+mac80211
+mac_hid
+macvlan
+mc
+mdio_devres
+mii
+mousedev
+nf_conntrack
+nf_defrag_ipv4
+nf_defrag_ipv6
+nf_nat
+nfnetlink
+nf_reject_ipv4
+nf_tables
+nft_chain_nat
+nft_compat
+nls_cp437
+nls_iso8859_1
+nvme
+nvme_common
+nvme_core
+overlay
+platform_profile
+polyval_clmulni
+polyval_generic
+qrtr
+r8152
+r8153_ecm
+r8169
+raid6_pq
+rapl
+razerkbd
+razerkraken
+razermouse
+realtek
+rfcomm
+rfkill
+rndis_host
+rng_core
+roles
+rtc_cmos
+rtw88_8822c
+rtw88_8822ce
+rtw88_core
+rtw88_pci
+sch_fq_codel
+scsi_common
+scsi_mod
+sd_mod
+serio
+serio_raw
+sha1_ssse3
+sha256_ssse3
+sha512_ssse3
+snd
+snd_acp_config
+snd_acp_legacy_common
+snd_acp_pci
+snd_compress
+snd_hda_codec
+snd_hda_codec_generic
+snd_hda_codec_hdmi
+snd_hda_codec_realtek
+snd_hda_core
+snd_hda_intel
+snd_hrtimer
+snd_hwdep
+snd_intel_dspcfg
+snd_intel_sdw_acpi
+snd_pci_acp3x
+snd_pci_acp5x
+snd_pci_acp6x
+snd_pci_ps
+snd_pcm
+snd_pcm_dmaengine
+snd_rawmidi
+snd_rn_pci_acp3x
+snd_rpl_pci_acp6x
+snd_seq
+snd_seq_device
+snd_seq_dummy
+snd_seq_midi
+snd_seq_midi_event
+snd_soc_acpi
+snd_soc_core
+snd_sof
+snd_sof_amd_acp
+snd_sof_amd_rembrandt
+snd_sof_amd_renoir
+snd_sof_amd_vangogh
+snd_sof_pci
+snd_sof_utils
+snd_sof_xtensa_dsp
+snd_timer
+snd_ump
+snd_usb_audio
+snd_usbmidi_lib
+soundcore
+sp5100_tco
+sparse_keymap
+stp
+t10_pi
+tap
+tee
+thermal
+think_lmi
+tiny_power_button
+tpm
+tpm_crb
+tpm_tis
+tpm_tis_core
+trusted
+ttm
+tun
+typec
+typec_ucsi
+uas
+ucsi_acpi
+uhid
+uinput
+usbhid
+usbnet
+usb_storage
+uvc
+uvcvideo
+vfat
+video
+videobuf2_common
+videobuf2_memops
+videobuf2_v4l2
+videobuf2_vmalloc
+videodev
+vivaldi_fmap
+watchdog
+wmi
+wmi_bmof
+xhci_hcd
+xhci_pci
+xhci_pci_renesas
+xor
+x_tables
+xt_CHECKSUM
+xt_conntrack
+xt_MASQUERADE
+xt_tcpudp
+zram


